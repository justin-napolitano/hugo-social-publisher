+++
title =  "Auto Post Hugo Blog to Social Sites"
date = "2024-06-14"
description = "Installing a suitable headliner"
author = "Justin Napolitano"
tags = ['python']
images = ["images/featured-caesar.jpg"]
+++


## Why

I have a hugo blog that is a pian to share across my social feeds. I want to automate it.  


## Create a mockup

For this I quickly sketched out my thoughts onto a writing pad.  My thinking is that I will drop a yaml file into each post directory to be read by a a python application calling social apis. 


#### Mockup

As you can see this is very rudimentary. I will traverse the posts directories looking for a publish.yaml file that will help a python program to auto-generate some arguments to pass to some apis. 


![mock-up](./images/auto-post-sketch.jpg)



### Mockup a yaml file

So I'm thinking that my file will have a pretty basic structure something like. 

```yaml
mastodon: true
x : true
linkedin : true
```


### Mockup the json config file

I do not know which arguments the apis will need but I'm going to guess I'll need something like... 

* Post body
* Tags

I might need some other open graph items, but I am hoping that these can be pulled from the rendered html.. we'll see. 


```json
{
    "urls: [
    {
    "post-url": "$GENERATED BY DIRECTORY",
    "post-body":"GENERATED BY POST DESCRIPTION",
    "post-tags": "GENERATED BY POST TAGS",
    "mastodon" :{
        "publish":true,
        "publish-date":epoch_date,
        "publish-data": Whatever is returned by the api
        }
    }
    ]
```

### Mockup the python publisher

I am sure there is a better way to do this. Maybe a more dynamic way? I am just writing quickly to get this done. I'll 100% revisit this when I actually write the program and experiment.  

```python


for url in urls:
    args = "\n".join([url['post-body'],url['post-url'],"# ".join(url['post-tags'])])
    if url['mastodon']]["publish"]:
        
        publish_mastodon_article(args=args)

    elif url['facebook']["publish"]:
        publish_facebook_article(args=args)

```

### Mockup the python directory walker

```python
import os

content_dirs = ["content/posts"]
out-paths = []

for dir in content_dirs:
    for root, dirs, files in os.walk(dir, topdown=False):
    for name in files:
        print(os.path.join(root, name))
        files.append(os.path.join(root,name))

for path in out_paths
    generate_json_config(path)
    # for name in dirs:
    #     print(os.path.join(root, name))
```


### Mockup the yaml reader

```python 
import pyyaml

def generate_json_config(path)
    json_gibberish = {
                "post-url": "jnapolitano.com/en/" + path,
                "post-body": null,
                "post-tags": null,
                "mastodon" :{
                    "publish":false,
                    "publish-date":null,
                    "publish-data": null
            }
    }

    try:
        yaml_path = path + publish.yaml
        with open(yaml_path, 'r') as yaml_gibberish:
            #whatver the yaml code is insert here... basiclly just translate it over to json and return
            yaml_json - yaml_gibberish.to_json()
        try:
            json_gibberish['mastodon']["publish"] = yaml_json["mastodon"]
        except:
            print("No mastodon setting passing default to no")
            json_gibberish['mastodon']["publish"] = false
    
    return json_gibberish
```

## Scrap Everything and Change Course

So as I was writing the above, I came up with another solution. Writing out a mockup of the code made the entire thing feel to kludgy. I don't like writing to file... keeping configs up to date.. etc.  I will write an rss feed tracker that will just listen to the published site and then run the social jobs when the xml is updated.  



### My new approach

My thinking is that I will add some options to the front matter of the posts that can easily be scraped from the rendered html.  The advantage of this approach is that it will permit me to always be up to date.  I will not add a republish feature... yet. I might but that will be another option.

### Stay tuned

I am breaking away from this post as I am changing direction. So in the mean time here is a photo of my cat.

!['caesar](./images/caesar.jpg)



<!-- [Headline Removal Link](https://www.youtube.com/watch?v=jVpBV9uR7Z8) -->
{{< youtube "jVpBV9uR7Z8" >}}

### Peeling off the headliner

The foam on my headliner had completely deteriorated. I would recommend using a mask and safety glasses for this part of the job. 

### Remove the fabric

The fabric is easy to peel off.  Just start by pulling it away. 

### Remove the excess foam

I made a mistake when I first started by using a wet brush that only caused the adhesive to stick everywhere. Once I let the brush dry, I took it to the board and scrubbed as much of the old foam away as I could.  I then took used adhesive remover to remove the old glue. After the solvent did its work I rinsed the whole thing off with a slightly damp rag 
wwwwwwwwww2
## Install the new headliner

### Cut the new headliner

First place the headliner material onto the board.  Then, put the accessories removed from the headliner in the previous steps into place.  With a razor cut holes in the board to fit the accessories. Place them through the headliner as if they were attached to the board.  When all are in place cut the excess headliner material around the board leaving about 2 inches or so to fold around the edges.

### Glue to the board

Use a headliner adhesive. I used a 3M headliner adhesive that seems to have worked well and is holding up in the summer heat.  

I adhered the headliner in strips starting at the top of the board moving to the back. I went about a quarter of the board at a time and placed the accessories into their correct spots as I glued. 

### Wait to set

The adhesive sets quickly, but I let it sit for about two hours prior to working with it again. 

## Install the mylar

On the back of the board I laid out a sheet of mylar and cut holes in it to allow the plastic rivets and accessories to connect to the sheet metal of the roof of the car. I then sprayed the whole thing down with adhesive.  This was an easy step and far more forgiving than the headliner because it is out of site. 


## Reinstalling the headliner board

### Get the board in the car

To get the board back into the car, I had to remove the head supports from the the seats and move the seats as far back as possible. I then pushed the back of the board into the car first and slowly maneuvered the board into place. 

### Reattach the board

I just went in reverse from removal. It was a simple process. 

### Reattach the headliner accessories

Again go in reverse from what you had done previously.  If the accessories do not fit then some of the headliner material will likely need to be removed so the plastic can attach to the correct points in the sheet metal. 

## Finished product

The finished headliner looks okay..I admit it looks kinda diy, but that is the thrill of doing things like this.  The quilt goes well enough with the car to not be annoying.  The mylar sheets work surprisingly well. I am considering going back and filling the empty space with aluminum foil clumps to improve the insulating power.

![headliner-1](./photos/roof_1.jpg)
![headliner-2](./photos/roof_2.jpg)
![headliner-3](./photos/roof_3.jpg)
